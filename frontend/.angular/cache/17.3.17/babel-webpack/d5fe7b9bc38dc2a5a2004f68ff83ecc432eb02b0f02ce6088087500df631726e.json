{"ast":null,"code":"import { ToastrService } from 'ngx-toastr';\nimport { WarehouseService } from '../../../core/services/warehouse.service';\nimport { ApiService } from '../../../core/services/api.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../core/services/warehouse.service\";\nimport * as i2 from \"../../../core/services/api.service\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"../../../shared/components/spinner/spinner.component\";\nimport * as i7 from \"../../../shared/components/modal/modal.component\";\nimport * as i8 from \"../../../shared/components/lucide-icon/lucide-icon.component\";\nconst _c0 = (a0, a1) => ({\n  \"px-2 py-1 rounded-full text-xs font-medium\": true,\n  \"bg-green-100 text-green-800\": a0,\n  \"bg-gray-100 text-gray-800\": a1\n});\nfunction LocationsComponent_option_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const wh_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", wh_r1.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(wh_r1.name);\n  }\n}\nfunction LocationsComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵelement(1, \"app-spinner\", 17);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LocationsComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1, \" No locations found for this warehouse. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LocationsComponent_div_17_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 25)(1, \"td\", 26);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 27);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 27);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 27);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 27);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 28)(12, \"span\", 29);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const location_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(location_r2.code || \"-\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(location_r2.zone || \"-\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(location_r2.shelf || \"-\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(location_r2.bin || \"-\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(location_r2.type || \"storage\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(7, _c0, location_r2.isActive !== false, location_r2.isActive === false));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", location_r2.isActive !== false ? \"Active\" : \"Inactive\", \" \");\n  }\n}\nfunction LocationsComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"table\", 20)(2, \"thead\", 21)(3, \"tr\")(4, \"th\", 22);\n    i0.ɵɵtext(5, \"Code\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\", 22);\n    i0.ɵɵtext(7, \"Zone\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\", 22);\n    i0.ɵɵtext(9, \"Shelf\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 22);\n    i0.ɵɵtext(11, \"Bin\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\", 22);\n    i0.ɵɵtext(13, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\", 22);\n    i0.ɵɵtext(15, \"Status\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(16, \"tbody\", 23);\n    i0.ɵɵtemplate(17, LocationsComponent_div_17_tr_17_Template, 14, 10, \"tr\", 24);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(17);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.locations);\n  }\n}\nfunction LocationsComponent_app_modal_18_option_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const type_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", type_r5);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(type_r5);\n  }\n}\nfunction LocationsComponent_app_modal_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-modal\", 30);\n    i0.ɵɵlistener(\"close\", function LocationsComponent_app_modal_18_Template_app_modal_close_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.closeAddModal());\n    });\n    i0.ɵɵelementStart(1, \"form\", 31);\n    i0.ɵɵlistener(\"ngSubmit\", function LocationsComponent_app_modal_18_Template_form_ngSubmit_1_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.addLocation());\n    });\n    i0.ɵɵelementStart(2, \"div\")(3, \"label\", 7);\n    i0.ɵɵtext(4, \"Zone \");\n    i0.ɵɵelementStart(5, \"span\", 32);\n    i0.ɵɵtext(6, \"*\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"input\", 33);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function LocationsComponent_app_modal_18_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.locationForm.zone, $event) || (ctx_r2.locationForm.zone = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\")(9, \"label\", 7);\n    i0.ɵɵtext(10, \"Shelf \");\n    i0.ɵɵelementStart(11, \"span\", 32);\n    i0.ɵɵtext(12, \"*\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"input\", 34);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function LocationsComponent_app_modal_18_Template_input_ngModelChange_13_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.locationForm.shelf, $event) || (ctx_r2.locationForm.shelf = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\")(15, \"label\", 7);\n    i0.ɵɵtext(16, \"Bin \");\n    i0.ɵɵelementStart(17, \"span\", 32);\n    i0.ɵɵtext(18, \"*\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"input\", 35);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function LocationsComponent_app_modal_18_Template_input_ngModelChange_19_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.locationForm.bin, $event) || (ctx_r2.locationForm.bin = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\")(21, \"label\", 7);\n    i0.ɵɵtext(22, \"Aisle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"input\", 36);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function LocationsComponent_app_modal_18_Template_input_ngModelChange_23_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.locationForm.aisle, $event) || (ctx_r2.locationForm.aisle = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"div\")(25, \"label\", 7);\n    i0.ɵɵtext(26, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"select\", 37);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function LocationsComponent_app_modal_18_Template_select_ngModelChange_27_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.locationForm.type, $event) || (ctx_r2.locationForm.type = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵtemplate(28, LocationsComponent_app_modal_18_option_28_Template, 2, 2, \"option\", 10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(29, \"div\", 38)(30, \"button\", 39);\n    i0.ɵɵtext(31, \"Add Location\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"button\", 40);\n    i0.ɵɵlistener(\"click\", function LocationsComponent_app_modal_18_Template_button_click_32_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.closeAddModal());\n    });\n    i0.ɵɵtext(33, \"Cancel\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"open\", ctx_r2.showAddModal);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.locationForm.zone);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.locationForm.shelf);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.locationForm.bin);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.locationForm.aisle);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.locationForm.type);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.locationTypes);\n  }\n}\nexport class LocationsComponent {\n  constructor(warehouseService, api, toastr) {\n    this.warehouseService = warehouseService;\n    this.api = api;\n    this.toastr = toastr;\n    this.warehouses = [];\n    this.locations = [];\n    this.selectedWarehouse = '';\n    this.loading = true;\n    this.locationsLoading = false;\n    this.showAddModal = false;\n    this.locationForm = {\n      warehouseId: '',\n      zone: '',\n      shelf: '',\n      bin: '',\n      aisle: '',\n      level: '1',\n      type: 'storage'\n    };\n    this.locationTypes = ['storage', 'receiving', 'shipping', 'quarantine', 'damaged'];\n  }\n  ngOnInit() {\n    this.loadWarehouses();\n  }\n  loadWarehouses() {\n    this.loading = true;\n    this.warehouseService.list({\n      page: 1,\n      limit: 1000\n    }).subscribe({\n      next: res => {\n        this.warehouses = res.warehouses;\n        if (this.warehouses.length > 0 && !this.selectedWarehouse) {\n          this.selectedWarehouse = this.warehouses[0].id;\n          this.loadLocations();\n        }\n        this.loading = false;\n      },\n      error: () => {\n        this.toastr.error('Failed to load warehouses');\n        this.loading = false;\n      }\n    });\n  }\n  loadLocations() {\n    if (!this.selectedWarehouse) return;\n    this.locationsLoading = true;\n    this.api.get(`/warehouses/${this.selectedWarehouse}/locations`).subscribe({\n      next: res => {\n        this.locations = res.data || [];\n        this.locationsLoading = false;\n      },\n      error: () => {\n        this.toastr.error('Failed to load locations');\n        this.locationsLoading = false;\n      }\n    });\n  }\n  onWarehouseChange() {\n    this.loadLocations();\n  }\n  openAddModal() {\n    this.locationForm.warehouseId = this.selectedWarehouse;\n    this.showAddModal = true;\n  }\n  closeAddModal() {\n    this.showAddModal = false;\n    this.locationForm = {\n      warehouseId: '',\n      zone: '',\n      shelf: '',\n      bin: '',\n      aisle: '',\n      level: '1',\n      type: 'storage'\n    };\n  }\n  addLocation() {\n    if (!this.locationForm.zone || !this.locationForm.shelf || !this.locationForm.bin) {\n      this.toastr.error('Please fill in zone, shelf, and bin');\n      return;\n    }\n    // Note: This would need a proper API endpoint for adding locations\n    this.toastr.info('Location creation feature needs backend endpoint');\n    this.closeAddModal();\n  }\n  static {\n    this.ɵfac = function LocationsComponent_Factory(t) {\n      return new (t || LocationsComponent)(i0.ɵɵdirectiveInject(i1.WarehouseService), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i3.ToastrService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LocationsComponent,\n      selectors: [[\"app-locations\"]],\n      decls: 19,\n      vars: 7,\n      consts: [[1, \"space-y-4\"], [1, \"flex\", \"items-center\", \"justify-between\", \"flex-wrap\", \"gap-3\"], [1, \"page-title\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [\"name\", \"plus\", 1, \"h-4\", \"w-4\"], [1, \"card\", \"p-4\", \"space-y-4\"], [1, \"flex\", \"items-center\", \"gap-4\"], [1, \"label\"], [1, \"input\", 3, \"ngModelChange\", \"change\", \"ngModel\", \"disabled\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"flex items-center justify-center py-12\", 4, \"ngIf\"], [\"class\", \"text-center py-12 text-gray-500\", 4, \"ngIf\"], [\"class\", \"overflow-x-auto\", 4, \"ngIf\"], [\"title\", \"Add Location\", 3, \"open\", \"close\", 4, \"ngIf\"], [3, \"value\"], [1, \"flex\", \"items-center\", \"justify-center\", \"py-12\"], [1, \"h-6\", \"w-6\"], [1, \"text-center\", \"py-12\", \"text-gray-500\"], [1, \"overflow-x-auto\"], [1, \"min-w-full\", \"divide-y\", \"divide-neutral-200\"], [1, \"bg-neutral-50\"], [1, \"px-6\", \"py-3\", \"text-left\", \"text-xs\", \"font-semibold\", \"text-neutral-600\", \"uppercase\", \"tracking-wider\"], [1, \"bg-white\", \"divide-y\", \"divide-neutral-100\"], [\"class\", \"hover:bg-neutral-50 transition-colors\", 4, \"ngFor\", \"ngForOf\"], [1, \"hover:bg-neutral-50\", \"transition-colors\"], [1, \"px-6\", \"py-4\", \"text-sm\", \"font-medium\", \"text-brand-700\"], [1, \"px-6\", \"py-4\", \"text-sm\", \"text-neutral-700\"], [1, \"px-6\", \"py-4\", \"text-sm\"], [3, \"ngClass\"], [\"title\", \"Add Location\", 3, \"close\", \"open\"], [1, \"space-y-4\", 3, \"ngSubmit\"], [1, \"text-red-500\"], [\"name\", \"zone\", \"required\", \"\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [\"name\", \"shelf\", \"required\", \"\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [\"name\", \"bin\", \"required\", \"\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [\"name\", \"aisle\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [\"name\", \"type\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [1, \"flex\", \"gap-2\", \"pt-4\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"flex-1\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", \"flex-1\", 3, \"click\"]],\n      template: function LocationsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\", 2);\n          i0.ɵɵtext(3, \"Locations\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"button\", 3);\n          i0.ɵɵlistener(\"click\", function LocationsComponent_Template_button_click_4_listener() {\n            return ctx.openAddModal();\n          });\n          i0.ɵɵelement(5, \"lucide-icon\", 4);\n          i0.ɵɵtext(6, \" Add Location \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6)(9, \"label\", 7);\n          i0.ɵɵtext(10, \"Warehouse\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"select\", 8);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function LocationsComponent_Template_select_ngModelChange_11_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.selectedWarehouse, $event) || (ctx.selectedWarehouse = $event);\n            return $event;\n          });\n          i0.ɵɵlistener(\"change\", function LocationsComponent_Template_select_change_11_listener() {\n            return ctx.onWarehouseChange();\n          });\n          i0.ɵɵelementStart(12, \"option\", 9);\n          i0.ɵɵtext(13, \"Select warehouse\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(14, LocationsComponent_option_14_Template, 2, 2, \"option\", 10);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(15, LocationsComponent_div_15_Template, 2, 0, \"div\", 11)(16, LocationsComponent_div_16_Template, 2, 0, \"div\", 12)(17, LocationsComponent_div_17_Template, 18, 1, \"div\", 13);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(18, LocationsComponent_app_modal_18_Template, 34, 7, \"app-modal\", 14);\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(11);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.selectedWarehouse);\n          i0.ɵɵproperty(\"disabled\", ctx.loading);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.warehouses);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.locationsLoading);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.locationsLoading && ctx.locations.length === 0);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.locationsLoading && ctx.locations.length > 0);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showAddModal);\n        }\n      },\n      dependencies: [i4.NgClass, i4.NgForOf, i4.NgIf, i5.ɵNgNoValidate, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i5.DefaultValueAccessor, i5.SelectControlValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.NgModel, i5.NgForm, i6.SpinnerComponent, i7.ModalComponent, i8.LucideIconComponent]\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}