{"ast":null,"code":"import { map, catchError, throwError } from 'rxjs';\nimport { ApiService } from './api.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./api.service\";\nexport class CatalogService {\n  constructor(api) {\n    this.api = api;\n  }\n  listCategories() {\n    return this.api.get('/catalog/categories').pipe(map(res => this.mapDocs(res.data)));\n  }\n  createCategory(payload) {\n    return this.api.post('/catalog/categories', payload).pipe(map(res => this.mapDoc(res.data)));\n  }\n  updateCategory(id, payload) {\n    return this.api.put(`/catalog/categories/${id}`, payload).pipe(map(res => this.mapDoc(res.data)), catchError(error => {\n      console.error('Update category error:', error);\n      return throwError(() => error);\n    }));\n  }\n  deleteCategory(id) {\n    return this.api.delete(`/catalog/categories/${id}`).pipe(map(res => res?.success !== false), catchError(error => {\n      console.error('Delete category error:', error);\n      return throwError(() => error);\n    }));\n  }\n  listBrands() {\n    return this.api.get('/catalog/brands').pipe(map(res => this.mapDocs(res.data)));\n  }\n  createBrand(payload) {\n    return this.api.post('/catalog/brands', payload).pipe(map(res => this.mapDoc(res.data)));\n  }\n  updateBrand(id, payload) {\n    return this.api.put(`/catalog/brands/${id}`, payload).pipe(map(res => this.mapDoc(res.data)));\n  }\n  deleteBrand(id) {\n    return this.api.delete(`/catalog/brands/${id}`).pipe(map(res => res?.success !== false));\n  }\n  listVariants() {\n    return this.api.get('/catalog/variants').pipe(map(res => this.mapDocs(res.data)));\n  }\n  createVariant(payload) {\n    return this.api.post('/catalog/variants', payload).pipe(map(res => this.mapDoc(res.data)));\n  }\n  updateVariant(id, payload) {\n    return this.api.put(`/catalog/variants/${id}`, payload).pipe(map(res => this.mapDoc(res.data)));\n  }\n  deleteVariant(id) {\n    return this.api.delete(`/catalog/variants/${id}`).pipe(map(res => res?.success !== false));\n  }\n  mapDocs(docs) {\n    return (docs || []).map(this.mapDoc);\n  }\n  mapDoc(doc) {\n    if (!doc) return doc;\n    const {\n      _id,\n      ...rest\n    } = doc;\n    return {\n      id: _id || doc.id,\n      ...rest\n    };\n  }\n  static {\n    this.ɵfac = function CatalogService_Factory(t) {\n      return new (t || CatalogService)(i0.ɵɵinject(i1.ApiService));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: CatalogService,\n      factory: CatalogService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}