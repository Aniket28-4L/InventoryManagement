{"ast":null,"code":"import _asyncToGenerator from \"F:/IM1/InventoryManagement/frontend/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ElementRef, EventEmitter } from '@angular/core';\nimport html2canvas from 'html2canvas';\nimport jsPDF from 'jspdf';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../modal/modal.component\";\nconst _c0 = [\"content\"];\nconst _c1 = [\"*\"];\nexport class PdfPreviewModalComponent {\n  constructor() {\n    this.open = false;\n    this.title = 'Print Preview';\n    this.filename = 'labels.pdf';\n    this.paper = 'a4';\n    this.close = new EventEmitter();\n  }\n  download() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (!_this.contentRef) return;\n      const canvas = yield html2canvas(_this.contentRef.nativeElement, {\n        scale: 2\n      });\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF({\n        orientation: 'p',\n        unit: 'pt',\n        format: _this.paper\n      });\n      const pageWidth = pdf.internal.pageSize.getWidth();\n      const pageHeight = pdf.internal.pageSize.getHeight();\n      const ratio = Math.min(pageWidth / canvas.width, pageHeight / canvas.height);\n      const imgWidth = canvas.width * ratio;\n      const imgHeight = canvas.height * ratio;\n      pdf.addImage(imgData, 'PNG', (pageWidth - imgWidth) / 2, 20, imgWidth, imgHeight);\n      pdf.save(_this.filename);\n    })();\n  }\n  static {\n    this.ɵfac = function PdfPreviewModalComponent_Factory(t) {\n      return new (t || PdfPreviewModalComponent)();\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PdfPreviewModalComponent,\n      selectors: [[\"app-pdf-preview-modal\"]],\n      viewQuery: function PdfPreviewModalComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.contentRef = _t.first);\n        }\n      },\n      inputs: {\n        open: \"open\",\n        title: \"title\",\n        filename: \"filename\",\n        paper: \"paper\"\n      },\n      outputs: {\n        close: \"close\"\n      },\n      ngContentSelectors: _c1,\n      decls: 9,\n      vars: 2,\n      consts: [[\"content\", \"\"], [3, \"close\", \"open\", \"title\"], [1, \"bg-white\", \"p-4\", \"rounded\", \"border\"], [\"modal-footer\", \"\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"btn\", \"btn-primary\", 3, \"click\"]],\n      template: function PdfPreviewModalComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵprojectionDef();\n          i0.ɵɵelementStart(0, \"app-modal\", 1);\n          i0.ɵɵlistener(\"close\", function PdfPreviewModalComponent_Template_app_modal_close_0_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.close.emit());\n          });\n          i0.ɵɵelementStart(1, \"div\", 2, 0);\n          i0.ɵɵprojection(3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"div\", 3)(5, \"button\", 4);\n          i0.ɵɵlistener(\"click\", function PdfPreviewModalComponent_Template_button_click_5_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.close.emit());\n          });\n          i0.ɵɵtext(6, \"Close\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"button\", 5);\n          i0.ɵɵlistener(\"click\", function PdfPreviewModalComponent_Template_button_click_7_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.download());\n          });\n          i0.ɵɵtext(8, \"Download PDF\");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"open\", ctx.open)(\"title\", ctx.title);\n        }\n      },\n      dependencies: [i1.ModalComponent],\n      styles: [\"[_nghost-%COMP%] {\\n  display: contents;\\n}\"]\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}