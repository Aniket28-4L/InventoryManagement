{"ast":null,"code":"import { ToastrService } from 'ngx-toastr';\nimport { WarehouseService } from '../../../core/services/warehouse.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../core/services/warehouse.service\";\nimport * as i2 from \"ngx-toastr\";\nexport class LocationsComponent {\n  constructor(warehouseService, toastr) {\n    this.warehouseService = warehouseService;\n    this.toastr = toastr;\n    this.warehouses = [];\n    this.locations = [];\n    this.selectedWarehouse = '';\n    this.loading = true;\n    this.locationsLoading = false;\n    this.showAddModal = false;\n    this.locationForm = {\n      warehouseId: '',\n      zone: '',\n      shelf: '',\n      bin: '',\n      aisle: '',\n      level: '1',\n      type: 'storage'\n    };\n    this.locationTypes = ['storage', 'receiving', 'shipping', 'quarantine', 'damaged'];\n  }\n  ngOnInit() {\n    this.loadWarehouses();\n  }\n  loadWarehouses() {\n    this.loading = true;\n    this.warehouseService.list({\n      page: 1,\n      limit: 1000\n    }).subscribe({\n      next: res => {\n        this.warehouses = res.warehouses;\n        if (this.warehouses.length > 0 && !this.selectedWarehouse) {\n          this.selectedWarehouse = this.warehouses[0].id;\n          this.loadLocations();\n        }\n        this.loading = false;\n      },\n      error: () => {\n        this.toastr.error('Failed to load warehouses');\n        this.loading = false;\n      }\n    });\n  }\n  loadLocations() {\n    if (!this.selectedWarehouse) return;\n    this.locationsLoading = true;\n    // Using listLocations from warehouse service\n    this.warehouseService.listLocations().subscribe({\n      next: res => {\n        // Filter locations by selected warehouse if needed\n        this.locations = Array.isArray(res) ? res.filter(loc => loc.warehouse === this.selectedWarehouse || loc.warehouse?._id === this.selectedWarehouse) : [];\n        this.locationsLoading = false;\n      },\n      error: () => {\n        this.toastr.error('Failed to load locations');\n        this.locationsLoading = false;\n      }\n    });\n  }\n  onWarehouseChange() {\n    this.loadLocations();\n  }\n  openAddModal() {\n    this.locationForm.warehouseId = this.selectedWarehouse;\n    this.showAddModal = true;\n  }\n  closeAddModal() {\n    this.showAddModal = false;\n    this.locationForm = {\n      warehouseId: '',\n      zone: '',\n      shelf: '',\n      bin: '',\n      aisle: '',\n      level: '1',\n      type: 'storage'\n    };\n  }\n  addLocation() {\n    if (!this.locationForm.zone || !this.locationForm.shelf || !this.locationForm.bin) {\n      this.toastr.error('Please fill in zone, shelf, and bin');\n      return;\n    }\n    // Note: This would need a proper API endpoint for adding locations\n    this.toastr.info('Location creation feature needs backend endpoint');\n    this.closeAddModal();\n  }\n  static {\n    this.ɵfac = function LocationsComponent_Factory(t) {\n      return new (t || LocationsComponent)(i0.ɵɵdirectiveInject(i1.WarehouseService), i0.ɵɵdirectiveInject(i2.ToastrService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LocationsComponent,\n      selectors: [[\"app-locations\"]],\n      decls: 5,\n      vars: 0,\n      consts: [[1, \"space-y-4\"], [1, \"page-title\"]],\n      template: function LocationsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n          i0.ɵɵtext(2, \"Locations\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"p\");\n          i0.ɵɵtext(4, \"Coming soon...\");\n          i0.ɵɵelementEnd()();\n        }\n      }\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}