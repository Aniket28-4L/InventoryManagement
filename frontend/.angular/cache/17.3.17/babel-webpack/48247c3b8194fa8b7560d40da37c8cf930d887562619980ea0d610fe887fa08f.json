{"ast":null,"code":"import _asyncToGenerator from \"F:/REACT PROJECT/IM/IM/InventoryManagement/frontend/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ToastrService } from 'ngx-toastr';\nimport { ProductsService } from '../../../core/services/products.service';\nimport { WarehouseService } from '../../../core/services/warehouse.service';\nimport { AuthService } from '../../../core/services/auth.service';\nimport { ApiService } from '../../../core/services/api.service';\nimport { environment } from '../../../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../../core/services/products.service\";\nimport * as i3 from \"../../../core/services/warehouse.service\";\nimport * as i4 from \"../../../core/services/auth.service\";\nimport * as i5 from \"../../../core/services/api.service\";\nimport * as i6 from \"ngx-toastr\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/forms\";\nimport * as i9 from \"../../../shared/components/spinner/spinner.component\";\nimport * as i10 from \"../../../shared/components/modal/modal.component\";\nimport * as i11 from \"../../../shared/components/barcode-preview/barcode-preview.component\";\nimport * as i12 from \"../../../shared/components/lucide-icon/lucide-icon.component\";\nconst _c0 = a0 => [\"/products\", a0, \"edit\"];\nconst _c1 = (a0, a1, a2) => ({\n  \"bg-red-50 border-red-200\": a0,\n  \"bg-orange-50 border-orange-200\": a1,\n  \"bg-blue-50 border-blue-200\": a2\n});\nconst _c2 = (a0, a1) => ({\n  \"text-red-600 font-bold\": a0,\n  \"text-gray-900\": a1\n});\nconst _c3 = (a0, a1) => ({\n  \"text-orange-600 font-semibold\": a0,\n  \"text-gray-700\": a1\n});\nconst _c4 = (a0, a1) => ({\n  \"bg-red-50/30\": a0,\n  \"bg-orange-50/30\": a1\n});\nconst _c5 = a0 => ({\n  \"text-red-600 font-bold\": a0\n});\nconst _c6 = (a0, a1, a2) => ({\n  \"text-orange-600 font-semibold\": a0,\n  \"text-green-600\": a1,\n  \"text-gray-500\": a2\n});\nfunction ProductDetailComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵelement(1, \"app-spinner\", 14);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtext(1, \" Product not found.\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailComponent_div_2_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Generate PDF\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailComponent_div_2_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Generating...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailComponent_div_2_div_50_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 51);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.product.supplier.companyName, \" \");\n  }\n}\nfunction ProductDetailComponent_div_2_div_50_div_7_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"Email: \", ctx_r1.product.supplier.contact.email, \"\");\n  }\n}\nfunction ProductDetailComponent_div_2_div_50_div_7_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"Phone: \", ctx_r1.product.supplier.contact.phone, \"\");\n  }\n}\nfunction ProductDetailComponent_div_2_div_50_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 52);\n    i0.ɵɵtemplate(1, ProductDetailComponent_div_2_div_50_div_7_div_1_Template, 2, 1, \"div\", 21)(2, ProductDetailComponent_div_2_div_50_div_7_div_2_Template, 2, 1, \"div\", 21);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.product.supplier.contact == null ? null : ctx_r1.product.supplier.contact.email);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.product.supplier.contact == null ? null : ctx_r1.product.supplier.contact.phone);\n  }\n}\nfunction ProductDetailComponent_div_2_div_50_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27)(1, \"div\", 28);\n    i0.ɵɵtext(2, \"Supplier\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 29)(4, \"div\", 48);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, ProductDetailComponent_div_2_div_50_div_6_Template, 2, 1, \"div\", 49)(7, ProductDetailComponent_div_2_div_50_div_7_Template, 3, 2, \"div\", 50);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.product.supplierName);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.product.supplier && ctx_r1.product.supplier.companyName);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.product.supplier && ((ctx_r1.product.supplier.contact == null ? null : ctx_r1.product.supplier.contact.email) || (ctx_r1.product.supplier.contact == null ? null : ctx_r1.product.supplier.contact.phone)));\n  }\n}\nfunction ProductDetailComponent_div_2_div_56_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 51);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"Value: \", ctx_r1.product.variantValue, \"\");\n  }\n}\nfunction ProductDetailComponent_div_2_div_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27)(1, \"div\", 28);\n    i0.ɵɵtext(2, \"Variant\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 29)(4, \"div\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, ProductDetailComponent_div_2_div_56_div_6_Template, 2, 1, \"div\", 49);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.product.variantName || \"-\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.product.variantValue);\n  }\n}\nfunction ProductDetailComponent_div_2_div_57_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 58)(1, \"td\", 56);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 56);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 56);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const v_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(v_r3.option);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(v_r3.value);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(v_r3.qty || 0);\n  }\n}\nfunction ProductDetailComponent_div_2_div_57_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 53)(1, \"div\", 31);\n    i0.ɵɵtext(2, \"Variant Entries\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"table\", 54)(4, \"thead\")(5, \"tr\", 55)(6, \"th\", 56);\n    i0.ɵɵtext(7, \"Variant\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\", 56);\n    i0.ɵɵtext(9, \"Value\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 56);\n    i0.ɵɵtext(11, \"Quantity\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"tbody\");\n    i0.ɵɵtemplate(13, ProductDetailComponent_div_2_div_57_tr_13_Template, 7, 3, \"tr\", 57);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.product.variants);\n  }\n}\nfunction ProductDetailComponent_div_2_div_61_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 59)(1, \"div\", 60);\n    i0.ɵɵelement(2, \"app-barcode-preview\", 61);\n    i0.ɵɵelementStart(3, \"span\", 62);\n    i0.ɵɵtext(4, \"Code 128\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 60);\n    i0.ɵɵelement(6, \"app-barcode-preview\", 63);\n    i0.ɵɵelementStart(7, \"span\", 62);\n    i0.ɵɵtext(8, \"QR Code\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", ctx_r1.product.barcode);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"value\", ctx_r1.getQrCodeValue());\n  }\n}\nfunction ProductDetailComponent_div_2_div_62_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1, \"No barcode available.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailComponent_div_2_div_70_lucide_icon_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"lucide-icon\", 73);\n  }\n}\nfunction ProductDetailComponent_div_2_div_70_lucide_icon_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"lucide-icon\", 74);\n  }\n}\nfunction ProductDetailComponent_div_2_div_70_button_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 75);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_div_2_div_70_button_14_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r1.showAddStockModal = true);\n    });\n    i0.ɵɵtext(1, \" Add Stock Now \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailComponent_div_2_div_70_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 76);\n    i0.ɵɵtext(1, \" \\u26A0\\uFE0F This product is out of stock. Consider adding stock to meet demand. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailComponent_div_2_div_70_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 77);\n    i0.ɵɵtext(1, \" \\u26A0\\uFE0F All available stock is currently reserved. No stock available for new orders. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailComponent_div_2_div_70_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 64)(1, \"div\", 17)(2, \"div\", 19);\n    i0.ɵɵtemplate(3, ProductDetailComponent_div_2_div_70_lucide_icon_3_Template, 1, 0, \"lucide-icon\", 65)(4, ProductDetailComponent_div_2_div_70_lucide_icon_4_Template, 1, 0, \"lucide-icon\", 66);\n    i0.ɵɵelementStart(5, \"div\")(6, \"div\", 67);\n    i0.ɵɵtext(7, \" Total Stock: \");\n    i0.ɵɵelementStart(8, \"span\", 68);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 69);\n    i0.ɵɵtext(11, \" Available: \");\n    i0.ɵɵelementStart(12, \"span\", 68);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵtemplate(14, ProductDetailComponent_div_2_div_70_button_14_Template, 2, 0, \"button\", 70);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, ProductDetailComponent_div_2_div_70_div_15_Template, 2, 0, \"div\", 71)(16, ProductDetailComponent_div_2_div_70_div_16_Template, 2, 0, \"div\", 72);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(10, _c1, ctx_r1.hasZeroStock, ctx_r1.hasLowStock && !ctx_r1.hasZeroStock, !ctx_r1.hasZeroStock && !ctx_r1.hasLowStock));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.hasZeroStock);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.hasLowStock && !ctx_r1.hasZeroStock);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(14, _c2, ctx_r1.hasZeroStock, !ctx_r1.hasZeroStock));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.totalStock);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(17, _c3, ctx_r1.hasLowStock, !ctx_r1.hasLowStock));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.totalAvailable);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.hasZeroStock);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.hasZeroStock);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.hasLowStock && !ctx_r1.hasZeroStock);\n  }\n}\nfunction ProductDetailComponent_div_2_div_71_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 78);\n    i0.ɵɵelement(1, \"app-spinner\", 79);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailComponent_div_2_div_72_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 80);\n    i0.ɵɵtext(1, \" No stock entries found. Add stock to get started. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailComponent_div_2_div_73_tr_17_lucide_icon_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"lucide-icon\", 98);\n  }\n}\nfunction ProductDetailComponent_div_2_div_73_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 87)(1, \"td\", 88);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 89);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 90)(6, \"div\", 91);\n    i0.ɵɵtemplate(7, ProductDetailComponent_div_2_div_73_tr_17_lucide_icon_7_Template, 1, 0, \"lucide-icon\", 92);\n    i0.ɵɵelementStart(8, \"span\", 68);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(10, \"td\", 93)(11, \"span\", 68);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"td\", 94);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\", 95)(16, \"button\", 96);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_div_2_div_73_tr_17_Template_button_click_16_listener() {\n      const item_r6 = i0.ɵɵrestoreView(_r5).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r1.openAdjustModal(item_r6));\n    });\n    i0.ɵɵelement(17, \"lucide-icon\", 97);\n    i0.ɵɵtext(18, \" Adjust \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r6 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(9, _c4, (item_r6.qty || 0) === 0, (item_r6.qty || 0) > 0 && (item_r6.availableQty || 0) === 0));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate((item_r6.warehouse == null ? null : item_r6.warehouse.name) || (item_r6.warehouse == null ? null : item_r6.warehouse.code) || \"Unknown\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.formatLocation(item_r6.location), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", (item_r6.qty || 0) === 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(12, _c5, (item_r6.qty || 0) === 0));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(item_r6.qty || 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(14, _c6, (item_r6.qty || 0) > 0 && (item_r6.availableQty || 0) === 0, (item_r6.availableQty || 0) > 0, (item_r6.availableQty || 0) === 0));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(item_r6.availableQty || 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r6.reservedQty || 0);\n  }\n}\nfunction ProductDetailComponent_div_2_div_73_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 81)(1, \"table\", 82)(2, \"thead\")(3, \"tr\", 58)(4, \"th\", 83);\n    i0.ɵɵtext(5, \"Warehouse\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\", 83);\n    i0.ɵɵtext(7, \"Location\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\", 84);\n    i0.ɵɵtext(9, \"Quantity\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 84);\n    i0.ɵɵtext(11, \"Available\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\", 84);\n    i0.ɵɵtext(13, \"Reserved\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\", 85);\n    i0.ɵɵtext(15, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(16, \"tbody\");\n    i0.ɵɵtemplate(17, ProductDetailComponent_div_2_div_73_tr_17_Template, 19, 18, \"tr\", 86);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(17);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.stock);\n  }\n}\nfunction ProductDetailComponent_div_2_app_modal_74_option_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 110);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const wh_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", wh_r8._id || wh_r8.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" \", wh_r8.name, \" \", wh_r8.code ? \"(\" + wh_r8.code + \")\" : \"\", \" \");\n  }\n}\nfunction ProductDetailComponent_div_2_app_modal_74_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-modal\", 99);\n    i0.ɵɵlistener(\"close\", function ProductDetailComponent_div_2_app_modal_74_Template_app_modal_close_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      ctx_r1.showAddStockModal = false;\n      return i0.ɵɵresetView(ctx_r1.stockForm = {\n        warehouseId: \"\",\n        qty: \"\",\n        locationId: \"\"\n      });\n    });\n    i0.ɵɵelementStart(1, \"form\", 100);\n    i0.ɵɵlistener(\"ngSubmit\", function ProductDetailComponent_div_2_app_modal_74_Template_form_ngSubmit_1_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.handleAddStock($event));\n    });\n    i0.ɵɵelementStart(2, \"div\")(3, \"label\", 101);\n    i0.ɵɵtext(4, \"Warehouse \");\n    i0.ɵɵelementStart(5, \"span\", 102);\n    i0.ɵɵtext(6, \"*\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"select\", 103);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ProductDetailComponent_div_2_app_modal_74_Template_select_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r1.stockForm.warehouseId, $event) || (ctx_r1.stockForm.warehouseId = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementStart(8, \"option\", 104);\n    i0.ɵɵtext(9, \"Select warehouse\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(10, ProductDetailComponent_div_2_app_modal_74_option_10_Template, 2, 3, \"option\", 105);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\")(12, \"label\", 101);\n    i0.ɵɵtext(13, \"Quantity \");\n    i0.ɵɵelementStart(14, \"span\", 102);\n    i0.ɵɵtext(15, \"*\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"input\", 106);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ProductDetailComponent_div_2_app_modal_74_Template_input_ngModelChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r1.stockForm.qty, $event) || (ctx_r1.stockForm.qty = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\", 107)(18, \"button\", 108);\n    i0.ɵɵtext(19, \"Add Stock\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"button\", 109);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_div_2_app_modal_74_Template_button_click_20_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      ctx_r1.showAddStockModal = false;\n      return i0.ɵɵresetView(ctx_r1.stockForm = {\n        warehouseId: \"\",\n        qty: \"\",\n        locationId: \"\"\n      });\n    });\n    i0.ɵɵtext(21, \"Cancel\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"open\", ctx_r1.showAddStockModal);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.stockForm.warehouseId);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.warehouses);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.stockForm.qty);\n  }\n}\nfunction ProductDetailComponent_div_2_app_modal_75_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-modal\", 111);\n    i0.ɵɵlistener(\"close\", function ProductDetailComponent_div_2_app_modal_75_Template_app_modal_close_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      ctx_r1.showAdjustStockModal = false;\n      ctx_r1.selectedStock = null;\n      return i0.ɵɵresetView(ctx_r1.stockForm = {\n        warehouseId: \"\",\n        qty: \"\",\n        locationId: \"\"\n      });\n    });\n    i0.ɵɵelementStart(1, \"form\", 100);\n    i0.ɵɵlistener(\"ngSubmit\", function ProductDetailComponent_div_2_app_modal_75_Template_form_ngSubmit_1_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.handleAdjustStock($event));\n    });\n    i0.ɵɵelementStart(2, \"div\")(3, \"label\", 101);\n    i0.ɵɵtext(4, \"Warehouse\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"input\", 112);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\")(7, \"label\", 101);\n    i0.ɵɵtext(8, \"Quantity \");\n    i0.ɵɵelementStart(9, \"span\", 102);\n    i0.ɵɵtext(10, \"*\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"input\", 113);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ProductDetailComponent_div_2_app_modal_75_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r1.stockForm.qty, $event) || (ctx_r1.stockForm.qty = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\", 114);\n    i0.ɵɵtext(13, \"Set the exact quantity for this warehouse\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 107)(15, \"button\", 108);\n    i0.ɵɵtext(16, \"Update Stock\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"button\", 109);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_div_2_app_modal_75_Template_button_click_17_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      ctx_r1.showAdjustStockModal = false;\n      ctx_r1.selectedStock = null;\n      return i0.ɵɵresetView(ctx_r1.stockForm = {\n        warehouseId: \"\",\n        qty: \"\",\n        locationId: \"\"\n      });\n    });\n    i0.ɵɵtext(18, \"Cancel\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"open\", ctx_r1.showAdjustStockModal);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"value\", (ctx_r1.selectedStock.warehouse == null ? null : ctx_r1.selectedStock.warehouse.name) || (ctx_r1.selectedStock.warehouse == null ? null : ctx_r1.selectedStock.warehouse.code) || \"Unknown\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.stockForm.qty);\n  }\n}\nfunction ProductDetailComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"div\", 17)(2, \"h1\", 18);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 19)(5, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_div_2_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.generatePdf());\n    });\n    i0.ɵɵtemplate(6, ProductDetailComponent_div_2_span_6_Template, 2, 0, \"span\", 21)(7, ProductDetailComponent_div_2_span_7_Template, 2, 0, \"span\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"a\", 22);\n    i0.ɵɵtext(9, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_div_2_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.printLabel());\n    });\n    i0.ɵɵelement(11, \"lucide-icon\", 24);\n    i0.ɵɵtext(12, \" Print Label \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(13, \"div\", 25)(14, \"div\", 26)(15, \"div\", 27)(16, \"div\", 28);\n    i0.ɵɵtext(17, \"SKU\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 29);\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\", 27)(21, \"div\", 28);\n    i0.ɵɵtext(22, \"Barcode\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"div\", 29);\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"div\", 27)(26, \"div\", 28);\n    i0.ɵɵtext(27, \"Unit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"div\", 29);\n    i0.ɵɵtext(29);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(30, \"div\", 27)(31, \"div\", 28);\n    i0.ɵɵtext(32, \"Cost\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"div\", 29);\n    i0.ɵɵtext(34);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(35, \"div\", 27)(36, \"div\", 28);\n    i0.ɵɵtext(37, \"Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"div\", 29);\n    i0.ɵɵtext(39);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(40, \"div\", 27)(41, \"div\", 28);\n    i0.ɵɵtext(42, \"Category\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"div\", 29);\n    i0.ɵɵtext(44);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(45, \"div\", 27)(46, \"div\", 28);\n    i0.ɵɵtext(47, \"Brand\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(48, \"div\", 29);\n    i0.ɵɵtext(49);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(50, ProductDetailComponent_div_2_div_50_Template, 8, 3, \"div\", 30);\n    i0.ɵɵelementStart(51, \"div\")(52, \"div\", 31);\n    i0.ɵɵtext(53, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(54, \"div\", 32);\n    i0.ɵɵtext(55);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(56, ProductDetailComponent_div_2_div_56_Template, 7, 2, \"div\", 30)(57, ProductDetailComponent_div_2_div_57_Template, 14, 1, \"div\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(58, \"div\", 34)(59, \"div\", 35);\n    i0.ɵɵtext(60, \"Barcode\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(61, ProductDetailComponent_div_2_div_61_Template, 9, 2, \"div\", 36)(62, ProductDetailComponent_div_2_div_62_Template, 2, 0, \"div\", 37);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(63, \"div\", 34)(64, \"div\", 38)(65, \"h2\", 39);\n    i0.ɵɵtext(66, \"Stock Levels\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(67, \"button\", 40);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_div_2_Template_button_click_67_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.showAddStockModal = true);\n    });\n    i0.ɵɵelement(68, \"lucide-icon\", 41);\n    i0.ɵɵtext(69, \" Add Stock \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(70, ProductDetailComponent_div_2_div_70_Template, 17, 20, \"div\", 42)(71, ProductDetailComponent_div_2_div_71_Template, 2, 0, \"div\", 43)(72, ProductDetailComponent_div_2_div_72_Template, 2, 0, \"div\", 44)(73, ProductDetailComponent_div_2_div_73_Template, 18, 1, \"div\", 45);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(74, ProductDetailComponent_div_2_app_modal_74_Template, 22, 4, \"app-modal\", 46)(75, ProductDetailComponent_div_2_app_modal_75_Template, 19, 3, \"app-modal\", 47);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.product.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.generatingPdf);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.generatingPdf);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.generatingPdf);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(25, _c0, ctx_r1.product.id));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.product.barcode);\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(ctx_r1.product.sku || \"-\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.product.barcode || \"-\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.product.uom || \"-\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.formatCurrency(ctx_r1.product.cost));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.formatCurrency(ctx_r1.product.price));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.product.categoryName || \"-\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.product.brandName || \"-\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.product.supplierName);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.product.description || \"No description provided.\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.product.variantName || ctx_r1.product.variantValue);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.product.variants && ctx_r1.product.variants.length > 0);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.product.barcode);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.product.barcode);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.stockLoading && ctx_r1.stock.length > 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.stockLoading);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.stockLoading && ctx_r1.stock.length === 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.stockLoading && ctx_r1.stock.length > 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.showAddStockModal);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.showAdjustStockModal && ctx_r1.selectedStock);\n  }\n}\nfunction ProductDetailComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 115);\n    i0.ɵɵelement(1, \"app-barcode-preview\", 61);\n    i0.ɵɵelementStart(2, \"p\", 116);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"value\", ctx_r1.product.barcode);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.product.barcode);\n  }\n}\nfunction ProductDetailComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 117);\n    i0.ɵɵelement(1, \"app-barcode-preview\", 63);\n    i0.ɵɵelementStart(2, \"p\", 118);\n    i0.ɵɵtext(3, \"Scan for details\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"value\", ctx_r1.getQrCodeValue());\n  }\n}\nfunction ProductDetailComponent_p_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 119);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.formatCurrency(ctx_r1.product.price));\n  }\n}\nexport class ProductDetailComponent {\n  constructor(route, router, productsService, warehouseService, authService, api, toastr) {\n    this.route = route;\n    this.router = router;\n    this.productsService = productsService;\n    this.warehouseService = warehouseService;\n    this.authService = authService;\n    this.api = api;\n    this.toastr = toastr;\n    this.product = null;\n    this.stock = [];\n    this.warehouses = [];\n    this.loading = true;\n    this.stockLoading = false;\n    this.showAddStockModal = false;\n    this.showAdjustStockModal = false;\n    this.selectedStock = null;\n    this.stockForm = {\n      warehouseId: '',\n      qty: '',\n      locationId: ''\n    };\n    this.generatingPdf = false;\n  }\n  ngOnInit() {\n    const id = this.route.snapshot.paramMap.get('id');\n    if (id) {\n      this.loadProduct(id);\n    }\n  }\n  loadProduct(id) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const token = _this.authService.token;\n      if (!token) return;\n      try {\n        _this.loading = true;\n        const [productRes, stockRes, warehousesRes] = yield Promise.all([_this.productsService.get(id).toPromise(), _this.productsService.stock(id).toPromise().catch(() => []), _this.warehouseService.list({\n          page: 1,\n          limit: 1000\n        }).toPromise()]);\n        _this.product = productRes;\n        _this.stock = stockRes || [];\n        _this.warehouses = warehousesRes?.warehouses || [];\n        // Auto-generate PDF if it doesn't exist (happens in backend, but ensure it's triggered)\n        // The backend getProduct endpoint already handles this\n      } catch (error) {\n        _this.toastr.error(error?.message || 'Failed to load product');\n      } finally {\n        _this.loading = false;\n      }\n    })();\n  }\n  getQrCodeValue() {\n    if (!this.product) return '';\n    // If PDF URL exists, use it for QR code, otherwise use barcode\n    if (this.product.pdfUrl) {\n      const baseUrl = window.location.origin;\n      return this.product.pdfUrl.startsWith('http') ? this.product.pdfUrl : `${baseUrl}${this.product.pdfUrl}`;\n    }\n    return this.product.barcode || this.product.sku || '';\n  }\n  refreshStock() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const id = _this2.route.snapshot.paramMap.get('id');\n      if (!id) return;\n      const token = _this2.authService.token;\n      if (!token) return;\n      try {\n        _this2.stockLoading = true;\n        const stockRes = yield _this2.productsService.stock(id).toPromise();\n        _this2.stock = stockRes || [];\n      } catch (error) {\n        console.error('Failed to refresh stock:', error);\n      } finally {\n        _this2.stockLoading = false;\n      }\n    })();\n  }\n  handleAddStock(e) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      e.preventDefault();\n      const id = _this3.route.snapshot.paramMap.get('id');\n      if (!id || !_this3.stockForm.warehouseId || !_this3.stockForm.qty) {\n        _this3.toastr.error('Please fill in warehouse and quantity');\n        return;\n      }\n      const token = _this3.authService.token;\n      if (!token) return;\n      try {\n        yield _this3.warehouseService.addStock({\n          productId: id,\n          warehouseId: _this3.stockForm.warehouseId,\n          qty: parseFloat(_this3.stockForm.qty),\n          locationId: _this3.stockForm.locationId || null\n        }).toPromise();\n        _this3.toastr.success('Stock added successfully');\n        _this3.showAddStockModal = false;\n        _this3.stockForm = {\n          warehouseId: '',\n          qty: '',\n          locationId: ''\n        };\n        yield _this3.refreshStock();\n      } catch (error) {\n        _this3.toastr.error(error?.message || 'Failed to add stock');\n      }\n    })();\n  }\n  handleAdjustStock(e) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      e.preventDefault();\n      const id = _this4.route.snapshot.paramMap.get('id');\n      if (!id || !_this4.selectedStock || !_this4.stockForm.qty) {\n        _this4.toastr.error('Please enter quantity');\n        return;\n      }\n      const token = _this4.authService.token;\n      if (!token) return;\n      try {\n        yield _this4.warehouseService.adjustStock({\n          productId: id,\n          warehouseId: _this4.selectedStock.warehouse?._id || _this4.selectedStock.warehouse,\n          qty: parseFloat(_this4.stockForm.qty),\n          locationId: _this4.stockForm.locationId || null\n        }).toPromise();\n        _this4.toastr.success('Stock adjusted successfully');\n        _this4.showAdjustStockModal = false;\n        _this4.selectedStock = null;\n        _this4.stockForm = {\n          warehouseId: '',\n          qty: '',\n          locationId: ''\n        };\n        yield _this4.refreshStock();\n      } catch (error) {\n        _this4.toastr.error(error?.message || 'Failed to adjust stock');\n      }\n    })();\n  }\n  openAdjustModal(stockItem) {\n    this.selectedStock = stockItem;\n    this.stockForm = {\n      warehouseId: stockItem.warehouse?._id || stockItem.warehouse,\n      qty: stockItem.qty || 0,\n      locationId: stockItem.location?._id || stockItem.location || ''\n    };\n    this.showAdjustStockModal = true;\n  }\n  get totalStock() {\n    return this.stock.reduce((sum, item) => sum + (item.qty || 0), 0);\n  }\n  get totalAvailable() {\n    return this.stock.reduce((sum, item) => sum + (item.availableQty || 0), 0);\n  }\n  get hasZeroStock() {\n    return this.totalStock === 0;\n  }\n  get hasLowStock() {\n    return this.totalStock > 0 && this.totalAvailable === 0;\n  }\n  formatCurrency(value) {\n    if (value === null || value === undefined || value === '') return '-';\n    const num = typeof value === 'number' ? value : parseFloat(value);\n    if (Number.isNaN(num)) return '-';\n    return `$${num.toFixed(2)}`;\n  }\n  formatLocation(location) {\n    if (!location) return '-';\n    const parts = [];\n    if (location.zone) parts.push(location.zone);\n    if (location.shelf) parts.push(location.shelf);\n    if (location.bin) parts.push(location.bin);\n    const result = parts.join('-');\n    return result || location.locationCode || '-';\n  }\n  generatePdf() {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this5.product?.id) return;\n      _this5.generatingPdf = true;\n      try {\n        const token = _this5.authService.token;\n        if (!token) {\n          _this5.toastr.error('Authentication required');\n          return;\n        }\n        const response = yield fetch(`${environment.apiUrl}/products/${_this5.product.id}/pdf/generate`, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        });\n        if (response.ok) {\n          const blob = yield response.blob();\n          const url = window.URL.createObjectURL(blob);\n          const a = document.createElement('a');\n          a.href = url;\n          a.download = `product-${_this5.product.id}.pdf`;\n          document.body.appendChild(a);\n          a.click();\n          window.URL.revokeObjectURL(url);\n          document.body.removeChild(a);\n          _this5.toastr.success('PDF generated and downloaded successfully');\n          // Reload product to get updated PDF URL\n          yield _this5.loadProduct(_this5.product.id);\n        } else {\n          const error = yield response.json().catch(() => ({\n            message: 'Failed to generate PDF'\n          }));\n          _this5.toastr.error(error.message || 'Failed to generate PDF');\n        }\n      } catch (error) {\n        _this5.toastr.error(error?.message || 'Failed to generate PDF');\n      } finally {\n        _this5.generatingPdf = false;\n      }\n    })();\n  }\n  printLabel() {\n    if (!this.product) {\n      this.toastr.error('Product not loaded');\n      return;\n    }\n    if (!this.product.barcode) {\n      this.toastr.error('Product must have a barcode to print label');\n      return;\n    }\n    // Reuse the existing barcode box component in the template.\n    // The print-only .print-label-container uses <app-barcode-preview>,\n    // and @media print CSS shows only that container during printing.\n    // Just trigger the browser print; Angular has already rendered the label.\n    window.print();\n  }\n  static {\n    this.ɵfac = function ProductDetailComponent_Factory(t) {\n      return new (t || ProductDetailComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ProductsService), i0.ɵɵdirectiveInject(i3.WarehouseService), i0.ɵɵdirectiveInject(i4.AuthService), i0.ɵɵdirectiveInject(i5.ApiService), i0.ɵɵdirectiveInject(i6.ToastrService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ProductDetailComponent,\n      selectors: [[\"app-product-detail\"]],\n      decls: 15,\n      vars: 8,\n      consts: [[\"class\", \"flex items-center justify-center py-20\", 4, \"ngIf\"], [\"class\", \"card p-6 text-center text-sm text-gray-600\", 4, \"ngIf\"], [\"class\", \"space-y-4\", 4, \"ngIf\"], [1, \"print-label-container\", 2, \"display\", \"none\"], [1, \"product-label\"], [1, \"label-header\"], [1, \"label-product-name\"], [1, \"label-sku\"], [1, \"label-barcodes\"], [\"class\", \"label-barcode-item\", 4, \"ngIf\"], [\"class\", \"label-qr-item\", 4, \"ngIf\"], [1, \"label-footer\"], [\"class\", \"label-price\", 4, \"ngIf\"], [1, \"flex\", \"items-center\", \"justify-center\", \"py-20\"], [1, \"h-8\", \"w-8\"], [1, \"card\", \"p-6\", \"text-center\", \"text-sm\", \"text-gray-600\"], [1, \"space-y-4\"], [1, \"flex\", \"items-center\", \"justify-between\"], [1, \"page-title\"], [1, \"flex\", \"items-center\", \"gap-2\"], [1, \"btn\", \"btn-primary\", 3, \"click\", \"disabled\"], [4, \"ngIf\"], [1, \"btn\", \"btn-secondary\", 3, \"routerLink\"], [1, \"btn\", \"btn-secondary\", 3, \"click\", \"disabled\"], [\"name\", \"printer\", 1, \"h-4\", \"w-4\"], [1, \"grid\", \"grid-cols-1\", \"lg:grid-cols-3\", \"gap-4\"], [1, \"card\", \"p-4\", \"space-y-3\", \"lg:col-span-2\"], [1, \"grid\", \"grid-cols-3\", \"gap-2\", \"py-2\", \"border-b\", \"last:border-b-0\"], [1, \"text-sm\", \"text-gray-500\"], [1, \"col-span-2\", \"text-sm\", \"text-gray-800\"], [\"class\", \"grid grid-cols-3 gap-2 py-2 border-b last:border-b-0\", 4, \"ngIf\"], [1, \"label\", \"mb-1\"], [1, \"text-sm\", \"text-gray-700\", \"whitespace-pre-line\"], [\"class\", \"mt-2\", 4, \"ngIf\"], [1, \"card\", \"p-4\"], [1, \"label\", \"mb-2\"], [\"class\", \"flex flex-wrap items-center gap-3\", 4, \"ngIf\"], [\"class\", \"text-sm text-gray-500\", 4, \"ngIf\"], [1, \"flex\", \"items-center\", \"justify-between\", \"mb-4\"], [1, \"text-lg\", \"font-semibold\"], [1, \"btn\", \"btn-primary\", \"flex\", \"items-center\", \"gap-2\", 3, \"click\"], [\"name\", \"plus\", 1, \"h-4\", \"w-4\"], [\"class\", \"mb-4 p-3 rounded-lg border\", 3, \"ngClass\", 4, \"ngIf\"], [\"class\", \"text-center py-4\", 4, \"ngIf\"], [\"class\", \"text-center py-8 text-gray-500\", 4, \"ngIf\"], [\"class\", \"overflow-x-auto\", 4, \"ngIf\"], [\"title\", \"Add Stock\", 3, \"open\", \"close\", 4, \"ngIf\"], [\"title\", \"Adjust Stock\", 3, \"open\", \"close\", 4, \"ngIf\"], [1, \"font-medium\"], [\"class\", \"text-xs text-gray-600\", 4, \"ngIf\"], [\"class\", \"mt-1 text-xs text-gray-600 space-y-0.5\", 4, \"ngIf\"], [1, \"text-xs\", \"text-gray-600\"], [1, \"mt-1\", \"text-xs\", \"text-gray-600\", \"space-y-0.5\"], [1, \"mt-2\"], [1, \"w-full\", \"text-sm\"], [1, \"text-left\", \"border-b\"], [1, \"py-2\", \"pr-2\"], [\"class\", \"border-b\", 4, \"ngFor\", \"ngForOf\"], [1, \"border-b\"], [1, \"flex\", \"flex-wrap\", \"items-center\", \"gap-3\"], [1, \"flex\", \"flex-col\", \"items-center\", \"gap-2\"], [\"type\", \"code128\", 3, \"value\"], [1, \"text-xs\", \"text-gray-500\"], [\"type\", \"qr\", 3, \"value\"], [1, \"mb-4\", \"p-3\", \"rounded-lg\", \"border\", 3, \"ngClass\"], [\"name\", \"alert-triangle\", \"class\", \"text-red-600 h-5 w-5\", 4, \"ngIf\"], [\"name\", \"alert-triangle\", \"class\", \"text-orange-600 h-5 w-5\", 4, \"ngIf\"], [1, \"text-sm\", \"font-medium\", \"text-gray-700\"], [3, \"ngClass\"], [1, \"text-xs\", \"text-gray-600\", \"mt-0.5\"], [\"class\", \"text-sm text-red-700 hover:text-red-900 font-medium underline\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"mt-2 text-sm text-red-700\", 4, \"ngIf\"], [\"class\", \"mt-2 text-sm text-orange-700\", 4, \"ngIf\"], [\"name\", \"alert-triangle\", 1, \"text-red-600\", \"h-5\", \"w-5\"], [\"name\", \"alert-triangle\", 1, \"text-orange-600\", \"h-5\", \"w-5\"], [1, \"text-sm\", \"text-red-700\", \"hover:text-red-900\", \"font-medium\", \"underline\", 3, \"click\"], [1, \"mt-2\", \"text-sm\", \"text-red-700\"], [1, \"mt-2\", \"text-sm\", \"text-orange-700\"], [1, \"text-center\", \"py-4\"], [1, \"h-6\", \"w-6\", \"mx-auto\"], [1, \"text-center\", \"py-8\", \"text-gray-500\"], [1, \"overflow-x-auto\"], [1, \"w-full\"], [1, \"text-left\", \"py-2\", \"px-3\", \"text-sm\", \"font-medium\", \"text-gray-700\"], [1, \"text-right\", \"py-2\", \"px-3\", \"text-sm\", \"font-medium\", \"text-gray-700\"], [1, \"text-center\", \"py-2\", \"px-3\", \"text-sm\", \"font-medium\", \"text-gray-700\"], [\"class\", \"border-b hover:bg-gray-50\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"border-b\", \"hover:bg-gray-50\", 3, \"ngClass\"], [1, \"py-2\", \"px-3\", \"text-sm\"], [1, \"py-2\", \"px-3\", \"text-sm\", \"text-gray-600\"], [1, \"py-2\", \"px-3\", \"text-sm\", \"text-right\", \"font-medium\"], [1, \"flex\", \"items-center\", \"justify-end\", \"gap-1\"], [\"name\", \"alert-triangle\", \"class\", \"text-red-500 h-3.5 w-3.5\", 4, \"ngIf\"], [1, \"py-2\", \"px-3\", \"text-sm\", \"text-right\"], [1, \"py-2\", \"px-3\", \"text-sm\", \"text-right\", \"text-orange-600\"], [1, \"py-2\", \"px-3\", \"text-center\"], [1, \"text-blue-600\", \"hover:text-blue-800\", \"flex\", \"items-center\", \"gap-1\", \"mx-auto\", 3, \"click\"], [\"name\", \"edit-2\", 1, \"h-3.5\", \"w-3.5\"], [\"name\", \"alert-triangle\", 1, \"text-red-500\", \"h-3.5\", \"w-3.5\"], [\"title\", \"Add Stock\", 3, \"close\", \"open\"], [1, \"space-y-4\", 3, \"ngSubmit\"], [1, \"label\"], [1, \"text-red-500\"], [\"name\", \"warehouseId\", \"required\", \"\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"number\", \"step\", \"0.01\", \"min\", \"0.01\", \"name\", \"qty\", \"required\", \"\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [1, \"flex\", \"gap-2\", \"pt-4\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"flex-1\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", \"flex-1\", 3, \"click\"], [3, \"value\"], [\"title\", \"Adjust Stock\", 3, \"close\", \"open\"], [\"type\", \"text\", \"disabled\", \"\", 1, \"input\", \"bg-gray-100\", 3, \"value\"], [\"type\", \"number\", \"step\", \"0.01\", \"min\", \"0\", \"name\", \"qty\", \"required\", \"\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [1, \"text-xs\", \"text-gray-500\", \"mt-1\"], [1, \"label-barcode-item\"], [1, \"label-barcode-text\"], [1, \"label-qr-item\"], [1, \"label-qr-text\"], [1, \"label-price\"]],\n      template: function ProductDetailComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, ProductDetailComponent_div_0_Template, 2, 0, \"div\", 0)(1, ProductDetailComponent_div_1_Template, 2, 0, \"div\", 1)(2, ProductDetailComponent_div_2_Template, 76, 27, \"div\", 2);\n          i0.ɵɵelementStart(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"h2\", 6);\n          i0.ɵɵtext(7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"p\", 7);\n          i0.ɵɵtext(9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(10, \"div\", 8);\n          i0.ɵɵtemplate(11, ProductDetailComponent_div_11_Template, 4, 2, \"div\", 9)(12, ProductDetailComponent_div_12_Template, 4, 1, \"div\", 10);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"div\", 11);\n          i0.ɵɵtemplate(14, ProductDetailComponent_p_14_Template, 2, 1, \"p\", 12);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.product);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.product);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate((ctx.product == null ? null : ctx.product.name) || \"Product Name\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\"SKU: \", (ctx.product == null ? null : ctx.product.sku) || \"-\", \"\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.product == null ? null : ctx.product.barcode);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.product);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.product == null ? null : ctx.product.price);\n        }\n      },\n      dependencies: [i7.NgClass, i7.NgForOf, i7.NgIf, i8.ɵNgNoValidate, i8.NgSelectOption, i8.ɵNgSelectMultipleOption, i8.DefaultValueAccessor, i8.NumberValueAccessor, i8.SelectControlValueAccessor, i8.NgControlStatus, i8.NgControlStatusGroup, i8.RequiredValidator, i8.MinValidator, i8.NgModel, i8.NgForm, i1.RouterLink, i9.SpinnerComponent, i10.ModalComponent, i11.BarcodePreviewComponent, i12.LucideIconComponent],\n      styles: [\"\\n\\n.print-label-container[_ngcontent-%COMP%] {\\n  display: none;\\n}\"]\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}