{"ast":null,"code":"import { map } from 'rxjs';\nimport { ApiService } from './api.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./api.service\";\nexport class SalesService {\n  constructor(api) {\n    this.api = api;\n  }\n  createSale(payload) {\n    return this.api.post('/sales', payload).pipe(map(res => ({\n      id: res?.data?.id,\n      orderNumber: res?.data?.orderNumber,\n      total: res?.data?.total,\n      createdAt: res?.data?.createdAt,\n      pdfUrl: res?.data?.pdfUrl\n    })));\n  }\n  list(params) {\n    return this.api.get('/sales', params).pipe(map(res => ({\n      data: (res?.data || []).map(x => ({\n        id: x._id || x.id,\n        orderNumber: x.orderNumber,\n        total: x.total,\n        createdAt: x.createdAt,\n        items: (x.items || []).map(it => ({\n          productName: it.productName,\n          quantity: it.quantity,\n          unitPrice: it.unitPrice,\n          discount: it.discount\n        }))\n      })),\n      page: res?.page || 1,\n      total: res?.total || 0,\n      pages: res?.pages || 0\n    })));\n  }\n  get(id) {\n    return this.api.get(`/sales/${id}`).pipe(map(res => ({\n      ...res?.data,\n      id: res?.data?._id || res?.data?.id\n    })));\n  }\n  invoicePdfUrl(id) {\n    return `/api/sales/${id}/pdf`;\n  }\n  static {\n    this.ɵfac = function SalesService_Factory(t) {\n      return new (t || SalesService)(i0.ɵɵinject(i1.ApiService));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: SalesService,\n      factory: SalesService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}