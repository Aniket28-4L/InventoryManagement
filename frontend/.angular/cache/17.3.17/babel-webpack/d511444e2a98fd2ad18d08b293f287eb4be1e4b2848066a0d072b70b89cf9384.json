{"ast":null,"code":"import { AuthService } from './auth.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./auth.service\";\nconst MATRIX = {\n  Products: {\n    Admin: 'All',\n    Manager: 'Write',\n    Staff: 'Read',\n    Viewer: 'Read'\n  },\n  Barcodes: {\n    Admin: 'All',\n    Manager: 'Write',\n    Staff: 'Write',\n    Viewer: 'Read'\n  },\n  StockIn: {\n    Admin: 'All',\n    Manager: 'Write',\n    Staff: 'Write',\n    Viewer: 'Read'\n  },\n  StockOut: {\n    Admin: 'All',\n    Manager: 'Write',\n    Staff: 'Write',\n    Viewer: 'Read'\n  },\n  Adjustments: {\n    Admin: 'All',\n    Manager: 'Write',\n    Staff: 'Request',\n    Viewer: 'Read'\n  },\n  Reports: {\n    Admin: 'All',\n    Manager: 'All',\n    Staff: 'Limited',\n    Viewer: 'Read'\n  },\n  Settings: {\n    Admin: 'All',\n    Manager: 'Limited',\n    Staff: 'None',\n    Viewer: 'None'\n  }\n};\nexport class RoleService {\n  constructor(auth) {\n    this.auth = auth;\n  }\n  get role() {\n    return this.auth.role;\n  }\n  can(module, action) {\n    const mapping = MATRIX[module] || {};\n    const level = mapping[this.role] || 'None';\n    if (level === 'All') return true;\n    if (level === 'Write') return ['View', 'Create', 'Edit', 'Print', 'Receive', 'Dispatch', 'Enter', 'Write'].includes(action);\n    if (level === 'Limited') return ['View', 'Read-only'].includes(action);\n    if (level === 'Request') return ['Request', 'View'].includes(action);\n    if (level === 'Read') return action === 'View' || action === 'Read-only';\n    return false;\n  }\n  static {\n    this.ɵfac = function RoleService_Factory(t) {\n      return new (t || RoleService)(i0.ɵɵinject(i1.AuthService));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: RoleService,\n      factory: RoleService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}