{"ast":null,"code":"import { map } from 'rxjs';\nimport { ApiService } from './api.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./api.service\";\nexport class WarehouseService {\n  constructor(api) {\n    this.api = api;\n  }\n  list(params = {}) {\n    return this.api.get('/warehouses', params).pipe(map(res => {\n      if (Array.isArray(res.data)) {\n        return {\n          warehouses: res.data.map(this.mapWarehouse),\n          page: 1,\n          total: res.data.length,\n          pages: 1\n        };\n      }\n      return {\n        warehouses: (res.data?.warehouses || []).map(this.mapWarehouse),\n        page: res.data?.page || 1,\n        total: res.data?.total || 0,\n        pages: res.data?.pages || 0\n      };\n    }));\n  }\n  get(id) {\n    return this.api.get(`/warehouses/${id}`).pipe(map(res => this.mapWarehouse(res.data)));\n  }\n  create(payload) {\n    return this.api.post('/warehouses', payload).pipe(map(res => this.mapWarehouse(res.data)));\n  }\n  update(id, payload) {\n    return this.api.put(`/warehouses/${id}`, payload).pipe(map(res => this.mapWarehouse(res.data)));\n  }\n  delete(id) {\n    return this.api.delete(`/warehouses/${id}`).pipe(map(res => res.success !== false));\n  }\n  listLocations() {\n    return this.api.get('/warehouses/locations').pipe(map(res => res.data || []));\n  }\n  addStock(payload) {\n    return this.api.post('/warehouses/stock/in', payload).pipe(map(res => res.data));\n  }\n  adjustStock(payload) {\n    return this.api.post('/warehouses/stock/adjust', payload).pipe(map(res => res.data));\n  }\n  mapWarehouse(doc) {\n    if (!doc) return doc;\n    const {\n      _id,\n      ...rest\n    } = doc;\n    return {\n      id: _id || doc.id,\n      ...rest\n    };\n  }\n  static {\n    this.ɵfac = function WarehouseService_Factory(t) {\n      return new (t || WarehouseService)(i0.ɵɵinject(i1.ApiService));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: WarehouseService,\n      factory: WarehouseService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}